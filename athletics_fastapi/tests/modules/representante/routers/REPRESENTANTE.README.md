# Casos de Prueba - Módulo de Representante

## FRONTEND - GESTIÓN DE ATLETAS REPRESENTADOS

| ID | Funcionalidad | Descripción | Acción del Usuario | Request Enviado (JSON) | Respuesta Backend Esperada (JSON) | Qué se ve en pantalla | Mensaje Exacto |
|---|---|---|---|---|---|---|---|
| TC-REP-F01 | Ver Mis Atletas (Éxito) | Carga inicial de la lista de hijos/representados | Navegar a `/representante/mis-atletas` | `GET /api/v1/representante/athletes` | `{"success": true, "message": "Atletas obtenidos correctamente", "data": [{"id": 1, "external_id": "550e8400-e29b-41d4-a716-446655440001", "user": {"first_name": "Atleta", "last_name": "Junior", "email": "atleta@test.com"}, "anios_experiencia": 2}]}` | Tabla con lista de atletas | "Atletas obtenidos correctamente" |
| TC-REP-F02 | Ver Mis Atletas (Vacío) | Representante no tiene hijos vinculados | Navegar a `/representante/mis-atletas` | `GET /api/v1/representante/athletes` | `{"success": true, "message": "Atletas obtenidos correctamente", "data": []}` | Mensaje: "No tienes atletas representados" | "Atletas obtenidos correctamente" |
| TC-REP-F03 | Registrar Hijo (Éxito) | Registro exitoso de un nuevo atleta | Formulario lleno -> Botón "Registrar Atleta" | `POST /api/v1/representante/athletes` con `{"username": "junior123", "email": "junior@test.com", "password": "Password123!", "first_name": "Junior", "last_name": "Perez", "tipo_identificacion": "CEDULA", "identificacion": "0912345678", "phone": "0999999999", "tipo_estamento": "EXTERNOS"}` | `{"success": true, "message": "Atleta registrado exitosamente", "data": {"id": 2, "user": {"first_name": "Junior", "last_name": "Perez"}}}` | Redirección a la lista de atletas | "Atleta registrado exitosamente" |
| TC-REP-F04 | Registrar Hijo (Error Validación) | Campos obligatorios vacíos | Click en "Registrar" con campos vacíos | N/A | N/A | Bordes rojos en inputs vacíos | "Por favor completa los campos obligatorios" |
| TC-REP-F05 | Registrar Hijo (Email Duplicado) | Error al registrar con email existente | Formulario con email duplicado -> "Registrar" | `POST /api/v1/representante/athletes` | `{"success": false, "message": "El usuario ya existe (Email o Identificación)", "data": null}` | Toast de error | "El usuario ya existe (Email o Identificación)" |
| TC-REP-F06 | Ver Detalle (Éxito) | Visualización completa de un atleta | Click en "Ver Detalle" | `GET /api/v1/representante/athletes/1` | `{"success": true, "message": "Detalle obtenido", "data": {"id": 1, "anios_experiencia": 2, "user": {"first_name": "Atleta", "last_name": "Junior", "email": "atleta@test.com", "phone": "0999999999"}}}` | Perfil detallado del atleta | "Detalle obtenido" |
| TC-REP-F07 | Actualizar Atleta (Éxito) | Modificación de datos básica | Cambiar teléfono -> "Guardar Cambios" | `PUT /api/v1/representante/athletes/1` con `{"first_name": "Atleta", "last_name": "Junior", "phone": "0987654321"}` | `{"success": true, "message": "Atleta actualizado correctamente", "data": {"id": 1, "user": {"phone": "0987654321"}}}` | Toast de éxito | "Atleta actualizado correctamente" |
| TC-REP-F08 | Ver Estadísticas | Carga de datos de rendimiento | Click en pestaña "Estadísticas" | `GET /api/v1/representante/athletes/1/estadisticas` | `{"success": true, "message": "Estadísticas obtenidas", "data": {"total_competencias": 3, "medallas": {"oro": 1, "plata": 0, "bronce": 2}}}` | Gráficos y contador de medallas | "Estadísticas obtenidas" |

## BACKEND - GESTIÓN DE ATLETAS REPRESENTADOS

| ID | Funcionalidad | Descripción | Datos de Entrada (JSON) | Salida Esperada (JSON) | Resultado Esperado |
|---|---|---|---|---|---|
| TC-REP-B01 | Listar Representados | Obtener lista de atletas del representante | `GET /api/v1/representante/athletes` (Token: Representante) | `{"success": true, "message": "Atletas obtenidos correctamente", "data": [{"id": 1, "external_id": "550e8400-e29b-41d4-a716-446655440001", "anios_experiencia": 2}]}` | Éxito (200) |
| TC-REP-B02 | Registrar Hijo | Crear usuario Atleta vinculado | `POST /api/v1/representante/athletes` con `{"username": "child", "email": "child@test.com", "password": "Pass123!", "first_name": "Child", "last_name": "Test", "tipo_identificacion": "CEDULA", "identificacion": "0701234567"}` | `{"success": true, "message": "Atleta registrado exitosamente", "data": {"id": 10, "external_id": "550e8400-e29b-41d4-a716-446655440010"}}` | Éxito (201) |
| TC-REP-B03 | Registrar Hijo (Duplicado) | Intento con email ya en uso | `POST /api/v1/representante/athletes` (Email duplicado) | `{"success": false, "message": "El usuario ya existe (Email o Identificación)", "data": null}` | Fallo (400) |
| TC-REP-B04 | Actualizar Hijo | Modificar datos del atleta | `PUT /api/v1/representante/athletes/1` con `{"first_name": "NuevoNombre"}` | `{"success": true, "message": "Atleta actualizado correctamente", "data": {"id": 1, "first_name": "NuevoNombre"}}` | Éxito (200) |
| TC-REP-B05 | Actualizar Hijo (Ajeno) | Intentar editar un atleta que no es su hijo | `PUT /api/v1/representante/athletes/999` | `{"success": false, "message": "No tienes permiso sobre este atleta", "data": null}` | Fallo (403) |
| TC-REP-B06 | Ver Detalle | Obtener info completa | `GET /api/v1/representante/athletes/1` | `{"success": true, "message": "Detalle obtenido", "data": {"id": 1, "anios_experiencia": 2}}` | Éxito (200) |
| TC-REP-B07 | Ver Estadísticas | Obtener medallas y competencias | `GET /api/v1/representante/athletes/1/estadisticas` | `{"success": true, "message": "Estadísticas obtenidas", "data": {"total_competencias": 1, "medallas": {"oro": 0, "plata": 1, "bronce": 0}}}` | Éxito (200) |
| TC-REP-B08 | Atleta No Encontrado | ID inválido o inexistente | `GET /api/v1/representante/athletes/9999` | `{"success": false, "message": "Atleta no encontrado", "data": null}` | Fallo (404) |
